# Research: Event Orchestration System (EODS) v0.1

## Purpose
Capture concrete decisions and rationale for unknowns identified in the plan: Managed Identity patterns, pyodbc and ODBC Driver 18 on Linux containers, agent-framework (AF) integration patterns, AI Foundry agent creation constraints, and MCP usage for docs and visual QA.

## Decisions

### Managed Identity for Azure Resources
Decision: Use Managed Identity (ManagedIdentityCredential) for all Azure service access in cloud deployments. For local development and CI, use AzureCLICredential or Developer-managed Managed Identity for self-hosted runners.

Rationale: Enforces zero-secrets policy and aligns with success criteria. Local development uses Azure CLI auth to obtain tokens; CI pipelines should leverage workload identity federation or managed identities on hosted runners when available.

Alternatives considered:
- Service principals with client secrets: rejected (violates zero-secrets requirement)
- Environment-injected credentials: rejected unless backed by Key Vault-managed identities


### pyodbc + ODBC Driver 18 on Linux containers
Decision: Use ODBC Driver 18 and pyodbc with unixODBC on Linux containers; provide platform-specific Dockerfile stages for Windows-based runners when required.

Rationale: ODBC Driver 18 is required for Azure SQL TLS/Enclave compatibility. Documented steps in quickstart for installing driver packages in CI and dev containers.

Alternatives considered:
- Use mssql+pytds or other drivers: rejected due to compatibility and TLS requirements.


### agent-framework (AF) integration patterns
Decision: Implement AF as the orchestration backbone. Agents will be represented by instruction_sets and adapters that map AF lifecycle events to backend services. AF task execution is wrapped with observability hooks and error handling policies.

Rationale: AF provides agentic flow control, and centralizes lifecycle management. Adapter pattern reduces coupling and allows isolated testing.

Alternatives considered:
- Building a custom orchestrator: rejected for speed-to-value and reuse of AF features.


### AI Foundry Agent Creation
Decision: Use AI Foundry SDK for creating specialized agents where AF requires external LLMs. Agent instruction_sets are maintained in repo and used by AF at runtime.

Rationale: Compatible with MCPs and supports versioning for instruction_sets. Ensure AI Foundry calls use Managed Identity for any Azure-hosted resources.


### MCP Integrations (context7 & Playwright)
Decision: Use context7 MCP for documentation discovery (research tasks and reference links) and Playwright MCP for visual QA automation and capturing UI diffs. Integrations will run authenticated via CI utilizing managed identities where possible.

Rationale: Aligns with the spec clarifications and success criteria for MCP functional integrations.


### Performance Baselines and Observability
Decision: Adopt the baselines specified in the spec and add tracing (OpenTelemetry), metrics (Prometheus-exporter compatible), and structured logs (JSON)

Rationale: Required for Constitution observability principle and for enforcing quality gates.


## Output
- Decisions logged and will be included in design artifacts (data-model.md, quickstart.md)
- No open [NEEDS CLARIFICATION] remains

*Generated by automation on 2025-09-26*
