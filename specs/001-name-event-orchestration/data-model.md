# Data Model: Event Orchestration System (EODS) v0.1

## Overview
This document maps Key Entities from the spec into SQLModel (relational) and Pydantic (validation) models. Primary relational store: Azure SQL. Complementary document store: CosmosDB for event artifacts and logs where schema flexibility is beneficial.

## Global Conventions
- All persisted artifacts include: id (UUID), created_at (UTC), updated_at (UTC), version (semver-compatible string), and correlation_id for tracing.
- DecisionLog and ChangeLog entries include user/agent, rationale, approvals, and signatures where applicable.
- Sensitive fields are marked for encryption at rest and excluded from default read APIs.

## Core Entities (SQLModel / Pydantic sketches)

### EventBrief
- Table: event_brief
- Fields: id: UUID (PK), title: str, date_range: JSON, audience_size: int, event_type: str, objectives: JSON, constraints: JSON, stakeholders_ref: UUID (FK to stakeholder_map), assumptions: JSON, metadata: JSON, created_at: datetime, updated_at: datetime, version: str

### Timeline
- Table: timeline
- Fields: id: UUID (PK), event_id: UUID (FK), phases: JSON, milestones: JSON, dependencies: JSON, critical_path: JSON, created_at, updated_at, version

### TaskRegister
- Table: task_register
- Fields: id, event_id, tasks: JSON (denormalized for rapid operations, but also exportable to relational task table), owner, status, start, end, dependencies, created_at, updated_at, version

### BudgetBaseline & CostModel
- Table: budget_baseline
- Fields: id, event_id, total_budget: Decimal, category_allocations: JSON, assumptions: JSON, created_at, updated_at, version

### DecisionLog & ChangeLog
- Table: decision_log, change_log
- Fields: id, event_id, entry_id, type, description, date, owner (agent/human), rationale: JSON, approvals: JSON, correlation_id, created_at, version

### Schema Versioning & Migration Strategy
- Each model stores a `version` field (semver string). Migrations are coordinated via migration tasks that add compatibility adapters and ensure the agent instruction_sets include migration steps.
- Backwards compatibility: read adapters handle older versions; write adapters validate and upgrade or reject with clear errors.

## Observability fields
- Every table includes correlation_id, op_id, and optional trace_id fields to link DB records to spans in tracing systems.

## Storage mapping
- Azure SQL: canonical EventBrief, Timeline, TaskRegister (relational-critical artifacts)
- CosmosDB: large or flexible artifacts (VenueScorecard, VendorNotes, Logs, RiskRegister snapshots) and quick retrieval for UI dashboards

*Generated by automation on 2025-09-26*
